(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{495:function(s,t,a){"use strict";a.r(t);var e=a(65),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"git-进阶操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-进阶操作"}},[s._v("#")]),s._v(" "),a("code",[s._v("git")]),s._v(" 进阶操作")]),s._v(" "),a("h2",{attrs:{id:"基础命令回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基础命令回顾"}},[s._v("#")]),s._v(" 基础命令回顾")]),s._v(" "),a("ol",[a("li",[a("code",[s._v("git log")]),s._v("："),a("code",[s._v("commit")]),s._v("提交历史")]),s._v(" "),a("li",[a("code",[s._v("git status")]),s._v("：查看当前文件是否有没提交的")])]),s._v(" "),a("h2",{attrs:{id:"修改上次-commit-信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改上次-commit-信息"}},[s._v("#")]),s._v(" 修改上次 "),a("code",[s._v("commit")]),s._v(" 信息")]),s._v(" "),a("p",[s._v("场景：")]),s._v(" "),a("blockquote",[a("p",[s._v("我们在某次 "),a("code",[s._v("git commit -m '提交信息'")]),s._v(" 里说明信息单词拼写错误想修改这次描述信息时")])]),s._v(" "),a("p",[s._v("步骤：")]),s._v(" "),a("ol",[a("li",[s._v("敲击命令：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用来修改前一次提交的 commit message")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("此时终端会使用"),a("code",[s._v("vi")]),s._v("编辑器让我们可在它上面对上次提交信息进行编辑")])]),s._v(" "),a("h2",{attrs:{id:"将之前提交操作进行合并或者修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#将之前提交操作进行合并或者修改"}},[s._v("#")]),s._v(" 将之前提交操作进行合并或者修改")]),s._v(" "),a("p",[s._v("场景：")]),s._v(" "),a("blockquote",[a("p",[s._v("我们对一个简单 "),a("code",[s._v("bug")]),s._v(" 修改 "),a("code",[s._v("commit")]),s._v(" 了多次后不想让别人看见这奇葩操作，想将之前的多次操作合并成一次")])]),s._v(" "),a("p",[s._v("步骤：")]),s._v(" "),a("ol",[a("li",[s._v("敲击命令：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 交互式的进行之前多次提交的修改")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里指编辑前两次操作：可合并/修改/删除这两次操作及其相关信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase -i HEAD~2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("终端修改，按下"),a("code",[s._v("i")]),s._v("进入插入模式，可以插入字母，按"),a("code",[s._v("x")]),s._v("可删除一个字，按"),a("code",[s._v("Esc")]),s._v("可退出当前模式，如果想要退出"),a("code",[s._v("vi")]),s._v("编辑界面，需要按"),a("code",[s._v(":q")]),s._v("即可（还有，如果想删除后面的可以按"),a("code",[s._v("100dd")]),s._v("代表删除后面100行数据，"),a("code",[s._v("u")]),s._v("撤销）")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic.downk.cc/item/5f87dc521cd1bbb86bda4b8b.jpg",alt:""}}),a("img",{attrs:{src:"https://pic.downk.cc/item/5f881bb21cd1bbb86b06879f.jpg",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("将想要合并的"),a("code",[s._v("commit")]),s._v("记录前面改为"),a("code",[s._v("s")]),s._v("，想要保留的不变，按"),a("code",[s._v(":wq")]),s._v("退出后，"),a("code",[s._v("git add .")]),s._v("保存修改，"),a("code",[s._v("git rebase --continue")]),s._v("继续变基操作")]),s._v(" "),a("li",[a("code",[s._v("git push -f")]),s._v("强制推送到远程分支即可")])]),s._v(" "),a("h2",{attrs:{id:"指针回退上一次提交"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指针回退上一次提交"}},[s._v("#")]),s._v(" 指针回退上一次提交")]),s._v(" "),a("p",[s._v("场景：")]),s._v(" "),a("blockquote",[a("p",[s._v("我们想撤回到某次提交之前")])]),s._v(" "),a("p",[s._v("步骤：")]),s._v(" "),a("ol",[a("li",[s._v("敲击命令：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD~1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("此时，指针指向上一次，因此，"),a("code",[s._v("git log")]),s._v("会显示为最近一次的提交之前的历史，最新一次提交历史被隐藏（即取消最新一次的提交）")]),s._v(" "),a("li",[s._v("注意："),a("code",[s._v("git status")]),s._v("你会发现：本地文件还是最新提交时的文件，仅仅是"),a("code",[s._v("git")]),s._v("的"),a("code",[s._v("working tree")]),s._v("回溯到了上一次（即 取消"),a("code",[s._v("git")]),s._v("历史里的最新提交，但本地文件依旧是最新提交时文件; 因此我们如果反悔可重新提交）")]),s._v(" "),a("li",[a("code",[s._v("git reset HEAD~1 --hard")]),s._v("：可实现将本地文件也回溯删除掉")]),s._v(" "),a("li",[s._v("回溯后如果知道之前的最新版本编号，可通过"),a("code",[s._v("git reset xxxx版本编号")]),s._v("重新指回来")])]),s._v(" "),a("h2",{attrs:{id:"分支继承最新-master-代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分支继承最新-master-代码"}},[s._v("#")]),s._v(" 分支继承最新 "),a("code",[s._v("master")]),s._v(" 代码")]),s._v(" "),a("blockquote",[a("p",[s._v("场景：通常我们想让比较老的分支继承最新 "),a("code",[s._v("master")]),s._v(" 的代码来避免冲突，一般都是通过 "),a("code",[s._v("git merge master")]),s._v(" 将主分支代码合并到当前分支来，但是当我们再将该分支合并到主分支时就会显得非常怪异")])]),s._v(" "),a("p",[s._v("步骤：")]),s._v(" "),a("ol",[a("li",[s._v("拉取最新主分支代码到当前分支，并将记录看起来像是分支从现在的主分支开出来的")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master --rebase\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("处理本地的冲突")]),s._v(" "),a("li",[s._v("添加到暂存区，使得最新代码处于"),a("code",[s._v("git")]),s._v("版本管理下")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("确认完成"),a("code",[s._v("rebase")]),s._v("变基操作")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" rebase --continue\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"储存当前修改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#储存当前修改"}},[s._v("#")]),s._v(" 储存当前修改")]),s._v(" "),a("blockquote",[a("p",[s._v("有时候我们在一个老分支修改了另一个新分支的内容时，想切回去，却发现已经无法直接切了")])]),s._v(" "),a("ol",[a("li",[s._v("将当前所有改动添加到暂存区，"),a("code",[s._v("git add .")]),s._v("，以便我们的"),a("code",[s._v("git")]),s._v("能追踪到全部更改，如果不这样做，新建的文件是无法在下一步追踪到的")]),s._v(" "),a("li",[a("code",[s._v("git stash")]),s._v("将当前全部修改储存起来，"),a("code",[s._v("git switch xxx-")]),s._v("切到其他分支")]),s._v(" "),a("li",[a("code",[s._v("git stash pop")]),s._v("将刚刚暂存的变动弹出来，如果有多个储存记录则可以用"),a("code",[s._v("git stash list")]),s._v("查看哦")])]),s._v(" "),a("h2",{attrs:{id:"项目一半的过程中修改了-gitignore-文件却无效问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目一半的过程中修改了-gitignore-文件却无效问题"}},[s._v("#")]),s._v(" 项目一半的过程中修改了 "),a("code",[s._v(".gitignore")]),s._v(" 文件却无效问题")]),s._v(" "),a("blockquote",[a("p",[s._v("如果我们项目做到一半时，突然要将一个文件夹加入到 忽略配置里，你会发现不生效，因为 忽略配置 只能忽略未加入到追踪的文件")])]),s._v(" "),a("ol",[a("li",[s._v("清除之前的缓存，来取消追踪："),a("code",[s._v("git rm -r --cached .")])]),s._v(" "),a("li",[s._v("将所有文件添加到暂存区："),a("code",[s._v("git add .")]),s._v("，此时就不会将配置文件里的东西一起加入")]),s._v(" "),a("li",[s._v("随便写个"),a("code",[s._v("commit")]),s._v("提交上去："),a("code",[s._v("git commit -m 'update .gitignore'")]),s._v("，再 "),a("code",[s._v("git push -f")]),s._v("即可")])]),s._v(" "),a("h2",{attrs:{id:"发布版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布版本"}},[s._v("#")]),s._v(" 发布版本")]),s._v(" "),a("ul",[a("li",[s._v("发布小版本：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切到某个分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" switch "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.3")]),s._v(".x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 升级小版本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" version patch\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将本地标签tag推送到origin远程仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --follow-tag\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[s._v("删除某个版本：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看tag列表")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# v1.3.3")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# v1.0.1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# v1.1.2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# v1.4.6")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("撤回某个版本tag:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除本地的1.4.8版本tag")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" tag -d v1.4.8\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将变更记录推送到服务器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin :refs/tags/v1.4.8\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重置当前git记录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset HEAD~1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消全部变更，当然你可以上一步直接使用 --hard，只是我们为了看一下哪些变更不需要，确保一下")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到当前远程分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("ul",[a("li",[s._v("发布大版本 - 1.4.x为例：")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建新tag分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到远程告诉仓库创建了一个分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".x:1.4.x\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进行本地与远程分支的关联")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --set-upstream-to"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("origin/1.4.x "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.4")]),s._v(".x\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后续步骤和打上小标签一样")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"commit提交错了分支-需要将错误分支的提交commit记录提取到正确分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit提交错了分支-需要将错误分支的提交commit记录提取到正确分支"}},[s._v("#")]),s._v(" commit提交错了分支，需要将错误分支的提交commit记录提取到正确分支")]),s._v(" "),a("p",[s._v("假设，我们想给"),a("code",[s._v("1888")]),s._v("分支提交几个"),a("code",[s._v("commit")]),s._v("，但是，突然发现我们之前是在"),a("code",[s._v("1666")]),s._v("分支上干的，"),a("code",[s._v("commit")]),s._v("提交记录已经进了"),a("code",[s._v("1666")]),s._v("分支：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切到正确分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" switch "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1888")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将错误分支的commit提取到当前分支")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" cherry-pick commit哈希值1 commit哈希值2 commit哈希值3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 支持批量提取多个哦，用空格隔开")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);