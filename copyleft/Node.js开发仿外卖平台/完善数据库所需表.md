# 完善数据库

## 设计本项目所需要的数据表

1. 商家数据表：

``` sql
CREATE TABLE IF NOT EXISTS `sellers` (
	id INT PRIMARY KEY AUTO_INCREMENT,
-- 	店铺名
	name VARCHAR(32),
-- 	店铺图片
	avatar VARCHAR(256),
-- 	店铺描述
	description VARCHAR(256),
-- 	店铺公告
	bulletin VARCHAR(256),
-- 	店铺地址
	address VARCHAR(256),
-- 	店铺分数
	score DOUBLE,
-- 	服务评分
	serviceScore DOUBLE,
-- 	食物评分
	foodScore DOUBLE,
-- 	配送评分
	deliveryScore DOUBLE,
-- 	配送范围
	deliveryArea DOUBLE,
-- 	销量
	sellCount INT,
-- 	送达时间
	deliveryTime INT,
-- 	配送价格
	deliveryPrice INT,
-- 	起送价格
	minPrice INT,
-- 	店铺服务时间
	service_time VARCHAR(64) NOT NULL DEFAULT '07：00-21.30',
-- 	商家所属用户ID
	merchant_user_id INT NOT NULL,
	FOREIGN KEY(merchant_user_id) REFERENCES users(id) ON UPDATE CASCADE ON DELETE RESTRICT,
-- 	支持活动
	supports VARCHAR(1024),
	cancel_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

2. 创建食物表、食物分类表、食物分类关联表：

``` sql
CREATE TABLE IF NOT EXISTS `goods` (
	id INT PRIMARY KEY AUTO_INCREMENT,
-- 	商品名
	name VARCHAR(32),
-- 	食物图
	image VARCHAR(256),
-- 	食物描述
	description VARCHAR(256),
-- 	食物分数
	score DOUBLE,
-- 	食物价格
	price DOUBLE,
-- 	原价
	oldPrice DOUBLE,
-- 	销量
	sellCount INT,
	cancel_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
CREATE TABLE IF NOT EXISTS `goods_type` (
	id INT PRIMARY KEY AUTO_INCREMENT,
-- 	类型名
	name VARCHAR(32),
	cancel_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
-- 创建一个多对多关系的选课表
CREATE TABLE IF NOT EXISTS goods_type_associations(
-- 由于Mysql数据表中只能有一个主键，因此为了使我们下面的联合主键能够生效，因此我们id字段不能用主键字段，只能用unique来标识唯一
	id INT UNIQUE AUTO_INCREMENT,
	goods_types_id INT NOT NULL,
	goods_id INT NOT NULL,
	sellers_id INT NOT NULL,
-- 	设置外键
	FOREIGN KEY(goods_types_id) REFERENCES goods_type(id) ON UPDATE CASCADE,
	FOREIGN KEY(goods_id) REFERENCES goods(id) ON UPDATE CASCADE ON DELETE RESTRICT,
	FOREIGN KEY(sellers_id) REFERENCES sellers(id) ON UPDATE CASCADE ON DELETE RESTRICT,
-- 	设置联合主键，保证插入数据时一个学生选择一门课数据唯一
	PRIMARY KEY(sellers_id,goods_types_id,goods_id),
	cancel_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```
